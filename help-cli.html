<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>JVAV CLI 与构建流水线</title>
  <link rel="stylesheet" href="./assets/styles.css" />
</head>
<body>
  <header class="header">
    <div class="container header-inner">
      <a class="brand" href="./index.html"><img src="./assets/logo.png" alt="JVAV" /><span>JVAV</span></a>
      <nav class="nav">
        <a href="./index.html">首页</a>
        <a href="./downloads/index.html">下载</a>
        <a href="./versions.html">版本</a>
        <a href="./changelog.html">更新</a>
        <a href="./about.html">关于</a>
        <a href="./help.html" class="active">文档</a>
      </nav>
    </div>
  </header>

  <div class="banner">CLI · 构建 · 发布流水线</div>

  <main class="container">
    <section class="section cards">
      <div class="card">
        <h3>核心命令</h3>
        <ul style="color: var(--muted); line-height: 1.6; margin-left: 18px;">
          <li><code>jvav init &lt;name&gt;</code>：创建项目骨架，包含脑波适配层。</li>
          <li><code>jvav build</code>：编译 .jvav 源并产出可验证包。</li>
          <li><code>jvav run &lt;file.jvav&gt;</code>：直接运行脚本，便于快速实验。</li>
          <li><code>jvav verify &lt;pkg&gt;</code>：生成/校验哈希与签名，确保可重复验证。</li>
          <li><code>jvav calibrate</code>：进入脑波校准模式，生成基线数据。</li>
        </ul>
      </div>
      <div class="card">
        <h3>构建流水线示例</h3>
        <p>在 CI 中可以串联：校验 → 构建 → 验证 → 签名 → 发布。伪流程：</p>
        <pre style="background:#f6f8fb;padding:12px;border-radius:10px;overflow:auto;">
jvav verify deps.pkg
jvav build
jvav verify dist/app.pkg
sign dist/app.pkg > dist/app.pkg.sig
publish dist/app.pkg dist/app.pkg.sig
        </pre>
      </div>
      <div class="card">
        <h3>环境与缓存</h3>
        <p>CLI 默认将缓存放在 <code>%LOCALAPPDATA%/JVAV/cache</code>，可通过环境变量 <code>JVAV_CACHE</code> 指定目录。CI 中可启用缓存加速构建。</p>
      </div>
    </section>

    <section class="section cards">
      <div class="card">
        <h3>集成到现有项目</h3>
        <p>你可以仅使用 JVAV 的脑波输入层，把指令输出到已有后端。通过 <code>jvav run --pipe</code> 将指令序列输出到标准输出，再由你的系统消费。</p>
      </div>
      <div class="card">
        <h3>调试技巧</h3>
        <ul style="color: var(--muted); line-height: 1.6; margin-left: 18px;">
          <li>开启 <code>JVAV_LOG=debug</code> 查看编译与信号处理细节。</li>
          <li>使用 <code>jvav run --trace</code> 输出指令转换链路。</li>
          <li>遇到延迟：关闭非必要插件，确认本地防病毒未拦截 CLI。</li>
        </ul>
      </div>
      <div class="card">
        <h3>发布注意事项</h3>
        <p>每个发布物务必附带 <code>.sha256</code> 与 <code>.sig</code>；在内网完成验真后再外发。若需离线分发，可将 <code>jvav.exe</code>、校验文件与签名包打成同一介质。</p>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="container">© 2026 JVAV · Real Project</div>
  </footer>
</body>
</html>
