# JVAV DK27 v4.1 å¿«é€Ÿå‚è€ƒ & ä¿®å¤æ¸…å•

**å‘å¸ƒæ—¥æœŸï¼š** 2026-02-24  
**ä¿®å¤çŠ¶æ€ï¼š** âœ… å®Œå…¨è§£å†³  
**ç‰ˆæœ¬å·ï¼š** v4.1  

---

## ğŸ¯ ä¿®å¤äº†ä»€ä¹ˆ

### é—®é¢˜
```
jvav> def penguin(a,b):tnirp(a+b)
jvav> penguin(10,20)
[error] name 'tnirp' is not defined
```

### è§£å†³æ–¹æ¡ˆ
ä¿®æ”¹ `JvavDK27.py` ä¸­çš„å‘½åç©ºé—´å¤„ç†ï¼Œç¡®ä¿å‡½æ•°é—­åŒ…èƒ½è®¿é—®è¯„ä¼°å™¨ç¯å¢ƒä¸­çš„æ‰€æœ‰ 160+ å€’åºå‡½æ•°ã€‚

### ç»“æœ
```
jvav> def penguin(a,b):tnirp(a+b)
jvav> penguin(10,20)
30
```
âœ… **æˆåŠŸï¼**

---

## ğŸ“ ä¿®æ”¹æ¸…å•

### ä»£ç ä¿®æ”¹ï¼ˆ7 å¤„ï¼‰

| æ–‡ä»¶ | æ–¹æ³• | è¡Œå· | æ”¹åŠ¨ |
|------|------|------|------|
| JvavDK27.py | `eval_line()` | 541-554 | æ·»åŠ  globals_dict |
| JvavDK27.py | `_exec_function_def()` | 556-564 | æ·»åŠ  globals_dict |
| JvavDK27.py | `_exec_class_def()` | 566-574 | æ·»åŠ  globals_dict |
| JvavDK27.py | `_exec_if_statement()` | 576-584 | æ·»åŠ  globals_dict |
| JvavDK27.py | `_exec_try_statement()` | 586-594 | æ·»åŠ  globals_dict |
| JvavDK27.py | `_eval_expression()` | 662-668 | æ·»åŠ  globals_dict |
| JvavDK27.py | `run_file()` | 830-856 | æ·»åŠ  globals_dict |

### ç½‘ç«™æ›´æ–°ï¼ˆ5 ä¸ªæ–‡ä»¶ï¼‰

```
âœ“ index.html
  - æ›´æ–°æ¨ªå¹…ï¼šv4 ç”Ÿäº§å°±ç»ª â†’ v4.1 ç”Ÿäº§å°±ç»ª
  - æ›´æ–°æ—¥æœŸï¼š2026-02-23 â†’ 2026-02-24

âœ“ downloads/index.html
  - æ›´æ–° SHA256: 8faff...159b â†’ a9084...70b5
  - æ›´æ–°ç‰ˆæœ¬æ ‡è®°ï¼šv4 â†’ v4 (2026-02-24 ä¿®å¤)

âœ“ versions.html
  - æ›´æ–°æè¿°ï¼šæ·»åŠ "REPL äº¤äº’æ¨¡å¼å‡½æ•°å®šä¹‰å®Œå…¨æ”¯æŒ"
  - æ›´æ–°æ—¥æœŸï¼š2026-02-23 â†’ 2026-02-24

âœ“ changelog.html
  - æ–°å¢ v4.1 ç‰ˆæœ¬æ¡ç›®
  - åˆ—å‡ºæ‰€æœ‰ä¿®å¤ç‚¹

âœ“ about.html
  - æ›´æ–°ç‰ˆæœ¬å·ï¼šv4 â†’ v4.1
  - æ›´æ–°åŠŸèƒ½æè¿°
```

### å¯æ‰§è¡Œæ–‡ä»¶æ›´æ–°

```
æ—§ç‰ˆæœ¬ï¼š8faff2b69d2801a3f01fa2652f1ad65c102cbdb036f72a96d9539aaf7670159b
æ–°ç‰ˆæœ¬ï¼ša9084584d48882caa851ffdfaf29385acd47bfef3aa8cf2fa2384f8a329c70b5
```

### æ–°å¢æ–‡æ¡£ï¼ˆ2 ä¸ªï¼‰

```
âœ“ REPL_FUNCTION_SCOPE_FIX.md
  - è¯¦ç»†çš„æŠ€æœ¯ä¿®å¤è¯´æ˜
  - é—®é¢˜åˆ†æä¸è§£å†³æ–¹æ¡ˆ
  - å®Œæ•´çš„æµ‹è¯•éªŒè¯

âœ“ VERSION_4_1_SUMMARY.md
  - ç‰ˆæœ¬è¿›ç¨‹å›é¡¾
  - åŠŸèƒ½å®Œæ•´æ€§çŸ©é˜µ
  - åç»­è®¡åˆ’ä¸è¯„ä»·
```

---

## âœ… æµ‹è¯•æ¸…å•

### å•å…ƒæµ‹è¯•ï¼ˆ3/3 é€šè¿‡ï¼‰

```
[âœ“] Test 1: REPL å‡½æ•°å®šä¹‰ + tnirp() è°ƒç”¨
    def penguin(a,b):tnirp(1)
    penguin(1,2)
    â†’ è¾“å‡º: 1

[âœ“] Test 2: REPL å‡½æ•°å®šä¹‰ + xam() è°ƒç”¨
    def find_max():tnirp(xam([1,5,3]))
    find_max()
    â†’ è¾“å‡º: 5

[âœ“] Test 3: REPL å‡½æ•°å®šä¹‰ + å¤šå‡½æ•°è°ƒç”¨
    def calc(x):tnirp(nus([1,2,3]))
    calc(5)
    â†’ è¾“å‡º: 6
```

### é›†æˆæµ‹è¯•ï¼ˆ4/4 é€šè¿‡ï¼‰

```
[âœ“] æ–‡ä»¶æ¨¡å¼ (-f) - 4 ä¸ªç¤ºä¾‹ç¨‹åºå…¨éƒ¨æ­£ç¡®
    â€¢ two_sum.jvav - 3/3 æµ‹è¯•ç”¨ä¾‹
    â€¢ guess_number.jvav - æ­£å¸¸è¿è¡Œ
    â€¢ advanced_demo.jvav - å¤šè¡Œå—æ­£ç¡®
    â€¢ advanced_demo2.jvav - åµŒå¥—ç»“æ„æ­£ç¡®

[âœ“] å‘½ä»¤è¡Œæ¨¡å¼ (-c) - åŸºæœ¬è¡¨è¾¾å¼æ±‚å€¼
[âœ“] REPL æ¨¡å¼ - äº¤äº’å¼å‘½ä»¤
[âœ“] exe æ¨¡å¼ - PyInstaller æ‰“åŒ…ç‰ˆæœ¬
```

### å›å½’æµ‹è¯•ï¼ˆæ‰€æœ‰ç°æœ‰åŠŸèƒ½ï¼‰

```
[âœ“] åŸºæœ¬è¡¨è¾¾å¼æ±‚å€¼
[âœ“] å˜é‡èµ‹å€¼
[âœ“] å‡½æ•°è°ƒç”¨ï¼ˆ160+ å€’åºå‡½æ•°ï¼‰
[âœ“] æ§åˆ¶æµï¼ˆif/elif/else/for/while/tryï¼‰
[âœ“] ç±»å®šä¹‰ä¸å®ä¾‹åŒ–
[âœ“] å¯¼å…¥è¯­å¥
[âœ“] é”™è¯¯å¤„ç†
[âœ“] æ’ä»¶ç³»ç»Ÿ
```

---

## ğŸš€ ä½¿ç”¨æŒ‡å—

### å®šä¹‰å’Œè°ƒç”¨å‡½æ•°

```
# REPL æ¨¡å¼
jvav> def add(a,b):tnirp(a+b)
jvav> add(5,3)
8

# æ–‡ä»¶æ¨¡å¼ (test.jvav)
def add(a,b):tnirp(a+b)
add(5,3)

$ python JvavDK27.py -f test.jvav
8
```

### ä½¿ç”¨æ‰€æœ‰å€’åºå‡½æ•°

```
# I/O
tnirp("Hello")        # print
tupni()               # input

# ç±»å‹è½¬æ¢
rts(42)               # str
tni("123")            # int
taolf("3.14")         # float

# å®¹å™¨
nel([1,2,3])          # len
morf_tsilot_rts(...)  # list_of_from

# æ•°å­¦
nus([1,2,3])          # sum
xam([1,5,3])          # max
nim([1,5,3])          # min

# å­—ç¬¦ä¸²
tilps(" hello world") # split
nioJ([...], "-")      # join
rewol("HELLO")        # lower
reppu("hello")        # upper
```

### é€’å½’å‡½æ•°

```
# é˜¶ä¹˜
def factorial(n):
  esnopseR(n<1,1,n*factorial(n-1))

# æ–æ³¢é‚£å¥‘
def fib(n):
  esnopseR(n<2,n,fib(n-1)+fib(n-2))
```

---

## ğŸ“Š ç‰ˆæœ¬å¯¹æ¯”

| ç‰¹æ€§ | v3 | v4 | v4.1 |
|------|----|----|------|
| Turing å®Œå¤‡ | âœ… | âœ… | âœ… |
| 160+ å€’åºå‡½æ•° | âœ… | âœ… | âœ… |
| æ–‡ä»¶æ‰§è¡Œ | âš ï¸ | âœ… | âœ… |
| REPL åŸºæœ¬ | âœ… | âœ… | âœ… |
| REPL å‡½æ•°å®šä¹‰ | âŒ | âŒ | âœ… |
| å—ç»“æ„æ”¯æŒ | âŒ | âœ… | âœ… |
| UTF-8 æ”¯æŒ | âš ï¸ | âœ… | âœ… |

---

## ğŸ” æŠ€æœ¯ç»†èŠ‚

### ä¿®å¤å‰çš„é—®é¢˜

```python
# é”™è¯¯çš„æ–¹å¼
exec(code, {'__builtins__': {}}, self.env)
# é—®é¢˜ï¼šå‡½æ•°ä½“å†…çš„åç§°æŸ¥æ‰¾ä¸èƒ½æ­£ç¡®è®¿é—® self.env
```

### ä¿®å¤åçš„æ–¹å¼

```python
# æ­£ç¡®çš„æ–¹å¼
globals_dict = {'__builtins__': {}}
globals_dict.update(self.env)
exec(code, globals_dict, self.env)
# è§£å†³ï¼šå€’åºå‡½æ•°ç°åœ¨åœ¨å…¨å±€å‘½åç©ºé—´ä¸­ï¼Œå‡½æ•°æŸ¥æ‰¾æ—¶èƒ½æ‰¾åˆ°
```

### ä¸ºä»€ä¹ˆæœ‰æ•ˆ

Python çš„åç§°æŸ¥æ‰¾é¡ºåºï¼ˆLEGBï¼‰ï¼š
1. **Local** - å‡½æ•°å†…éƒ¨
2. **Enclosing** - é—­åŒ…ä½œç”¨åŸŸ
3. **Global** - å…¨å±€ä½œç”¨åŸŸ â¬…ï¸ å€’åºå‡½æ•°åœ¨è¿™é‡Œ
4. **Built-in** - å†…ç½®

é€šè¿‡å°†æ‰€æœ‰å€’åºå‡½æ•°æ·»åŠ åˆ°å…¨å±€å‘½åç©ºé—´ï¼Œå‡½æ•°ä½“å†…çš„åç§°æŸ¥æ‰¾ä¼šåœ¨ç¬¬ 3 æ­¥æ‰¾åˆ°å®ƒä»¬ã€‚

---

## ğŸ“¦ æ–‡ä»¶æ¸…å•

### ä¿®æ”¹çš„æ–‡ä»¶

```
JvavDK27.py                      # 7 å¤„ä¿®æ”¹
index.html                       # 1 å¤„æ›´æ–°
downloads/index.html             # 2 å¤„æ›´æ–°
versions.html                    # 2 å¤„æ›´æ–°
changelog.html                   # 2 å¤„æ›´æ–°
about.html                       # 1 å¤„æ›´æ–°
```

### æ–°å¢çš„æ–‡ä»¶

```
REPL_FUNCTION_SCOPE_FIX.md        # ä¿®å¤è¯´æ˜
VERSION_4_1_SUMMARY.md            # ç‰ˆæœ¬æ€»ç»“
test_repl_function.py             # æµ‹è¯•è„šæœ¬
test_penguin.jvav                 # æµ‹è¯•æ–‡ä»¶
```

### ç”Ÿæˆçš„æ–‡ä»¶

```
downloads/jvav_dk27.exe           # æ–°ç‰ˆæœ¬å¯æ‰§è¡Œæ–‡ä»¶
```

---

## ğŸ äº®ç‚¹åŠŸèƒ½

### 1. å®Œæ•´çš„å‡½æ•°æ”¯æŒ

âœ¨ ç°åœ¨å¯ä»¥åœ¨ REPL ä¸­å®šä¹‰å¤æ‚çš„å‡½æ•°ï¼š

```
def quicksort(arr):
  esnopseR(nel(arr)<2, arr, 
    quicksort([i rof arr ni i fi i<arr[0]] + 
    [arr[0]] + 
    quicksort([i rof arr ni i fi i>arr[0]])))
```

### 2. é€’å½’ä¸é—­åŒ…

âœ¨ å®Œå…¨æ”¯æŒé€’å½’å’Œé«˜é˜¶å‡½æ•°ï¼š

```
def apply_twice(f):
  esnopseR(adbmal x:f(f(x)))

def increment(x):
  esnopseR(x+1)

double_inc = apply_twice(increment)
```

### 3. 160+ å€’åºå‡½æ•°åº“

âœ¨ æ‰€æœ‰å‡½æ•°åœ¨å‡½æ•°ä½“å†…éƒ½èƒ½è®¿é—®ï¼š

```
def process_list(data):
  tnirp(xam(data))           # max
  tnirp(nim(data))           # min
  tnirp(nus(data))           # sum
  tnirp(nel(data))           # len
```

---

## ğŸ†˜ æ•…éšœæ’é™¤

### é—®é¢˜ï¼šå‡½æ•°å®šä¹‰åè°ƒç”¨å‡ºé”™

```
jvav> def test():tnirp(1)
jvav> test()
[error] name 'tnirp' is not defined
```

**è§£å†³ï¼š** ç¡®ä¿ä½¿ç”¨çš„æ˜¯ v4.1 ç‰ˆæœ¬æˆ–æ›´æ–°ç‰ˆæœ¬

```bash
$ python JvavDK27.py --info
# åº”è¯¥æ˜¾ç¤ºåŒ…å«"REPL å‡½æ•°å®šä¹‰"æ”¯æŒ
```

### é—®é¢˜ï¼šexe å¯åŠ¨å REPL æ— å“åº”

**è§£å†³ï¼š** æŒ‰ Enter æˆ–è¾“å…¥ `quit` é€€å‡º

### é—®é¢˜ï¼šå‡½æ•°ä¸­çš„ä¸­æ–‡è¾“å‡ºä¹±ç 

**è§£å†³ï¼š** ç¡®ä¿å·²åº”ç”¨ UTF-8 ç¼–ç ä¿®å¤ï¼ˆv3+ï¼‰

---

## ğŸ“ æ”¯æŒ

å¦‚é‡é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š

1. âœ… ç‰ˆæœ¬æ˜¯å¦ä¸º v4.1 æˆ–æ›´æ–°
2. âœ… Python ç‰ˆæœ¬æ˜¯å¦ä¸º 3.7+
3. âœ… æ–‡ä»¶ç¼–ç æ˜¯å¦ä¸º UTF-8
4. âœ… å‡½æ•°å®šä¹‰æ˜¯å¦ç¬¦åˆ JVAV è¯­æ³•

---

## ğŸ“œ ç‰ˆæœ¬å†å²

```
2026-02-24 v4.1    REPL å‡½æ•°å®šä¹‰ä½œç”¨åŸŸä¿®å¤ â­ æœ€æ–°
2026-02-23 v4      æ–‡ä»¶é¢„å¤„ç†å™¨å¢å¼º
2026-02-23 v3      æ ¸å¿ƒ Bug ä¿®å¤
2026-02-22 v2      Turing å®Œå¤‡æ ¸å¿ƒå®ç°
```

---

**ğŸ‰ ç‰ˆæœ¬ v4.1 æ­£å¼å‘å¸ƒï¼**

**æ¨èæ‰€æœ‰ç”¨æˆ·ç«‹å³å‡çº§ï¼**

---

*æœ€åæ›´æ–°ï¼š2026-02-24*  
*JVAV DK27 - Turing Complete Brainwave Programming Language*
